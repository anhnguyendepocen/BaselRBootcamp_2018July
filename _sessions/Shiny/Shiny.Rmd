---
title: "Interactive Plotting"
subtitle: "with Shiny"
author: "BaselRBootcamp<br/><a href='https://therbootcamp.github.io'>www.therbootcamp.com</a><br/><a href='https://twitter.com/therbootcamp'>@therbootcamp</a>"
date: "July 2018"
output:
  xaringan::moon_reader:
    css: ["default", "baselrbootcamp.css"]
    lib_dir: libs
    nature:
      highlightStyle: github
      highlightLines: true
      countIncrementalSlides: false
      ratio: '16:9'
---

layout: true

<div class="my-footer"><span>
<a href="https://therbootcamp.github.io/"><font color="#7E7E7E">BaselRBootcamp, July 2018</font></a>
&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;
&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;
&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;
&emsp;&emsp;&emsp;&emsp;&emsp;
<a href="https://therbootcamp.github.io/"><font color="#7E7E7E">www.therbootcamp.com</font></a>
</span></div> 

---

```{r setup, include=FALSE}
options(htmltools.dir.version = FALSE)
# see: https://github.com/yihui/xaringan
# install.packages("xaringan")
# see: 
# https://github.com/yihui/xaringan/wiki
# https://github.com/gnab/remark/wiki/Markdown
options(width=110)
options(digits = 4)
```

```{r, echo = FALSE}
knitr::opts_chunk$set(comment=NA, fig.width=6, fig.height=6, echo = TRUE, eval = TRUE, message = FALSE, warning = FALSE, fig.align = 'center')
```

```{r, echo = FALSE, fig.align = 'center', out.width = "100%"}
knitr::include_graphics("https://raw.githubusercontent.com/therbootcamp/therbootcamp.github.io/master/_sessions/_image/matrix_shiny.png")
```

---
## This is Shiny


<iframe src="https://shiny.rstudio.com/gallery/movie-explorer.html" width="1200" height="7500"></iframe>


---

## What is Shiny?

```{r, echo = FALSE, fig.align = 'center', fig.cap = '<a href=http://shiny.rstudio.com/https://raw.githubusercontent.com/therbootcamp/therbootcamp.github.io/master/_sessions/_image/shiny-cheatsheet.pdf>R Studio</a>', out.width = "90%"}
knitr::include_graphics("https://raw.githubusercontent.com/therbootcamp/therbootcamp.github.io/master/_sessions/_image/shiny_definition.png")
```


---

## What does that mean?

.pull-left45[

Create interactive websites to explore, analyse, and visualize data all within R Studio!

No need to learn HTML, CSS, Javascript

```{r, echo = FALSE, fig.align = 'center', out.width = "80%"}
knitr::include_graphics("https://raw.githubusercontent.com/therbootcamp/therbootcamp.github.io/master/_sessions/_image/nohtml.png")
```

]

.pull-right45[

### I can do this all in Shiny!

```{r, echo = FALSE, fig.align = 'center', out.width = "100%"}
knitr::include_graphics("https://raw.githubusercontent.com/therbootcamp/therbootcamp.github.io/master/_sessions/_image/shiny_ss.png")
```

]

---

## Scatterplot App

<iframe src="https://econpsychbasel.shinyapps.io/FinalApp/" width="1200" height="7500"></iframe>

---

## FFTrees Shiny App

<iframe src="https://econpsychbasel.shinyapps.io/shinyfftrees/" width="1200" height="750"></iframe>

https://econpsychbasel.shinyapps.io/shinyfftrees/

---

## Balloon Analogue Risk Task (BART) Shiny App

<iframe src="https://econpsychbasel.shinyapps.io/shinypsych_bart/" width="1200" height="750"></iframe>

https://econpsychbasel.shinyapps.io/shinypsych_bart/

---

## Shiny

```{r, echo = FALSE, fig.align = 'center', out.width = "60%", fig.cap = "<a href = http://shiny.rstudio.com>R Studio</a>"}
knitr::include_graphics("https://raw.githubusercontent.com/therbootcamp/therbootcamp.github.io/master/_sessions/_image/whatyoucando.png")
```

---

.pull-left4[
<br><br>
## Shiny is a new world...

Shiny is built on R, but it is a <high>very</high> different animal.

<u>Good News</u>

All of your standard plotting and analysis code will still be "regular R"

<u>Bad News</u>

To program a full app, you must learn the <high>reactive</high> language of Shiny.

Learn by example. Tons of shiny apps online. Most code is available.

]

.pull-right55[
<br><br>

<center><a href = http://shiny.rstudio.com>shiny.rstudio.com</a>

```{r, echo = FALSE, fig.align = 'center', out.width = "70%"}
knitr::include_graphics("https://raw.githubusercontent.com/therbootcamp/therbootcamp.github.io/master/_sessions/_image/learnshiny_B.png")
```
<br>
<center><a href = "https://shiny.rstudio.com/gallery/">RStudio Shiny Example Gallery</a>

]
---
# How programming a Shiny App looks

```{r, echo = FALSE, fig.align = 'center', out.width = "80%"}
knitr::include_graphics("https://raw.githubusercontent.com/therbootcamp/therbootcamp.github.io/master/_sessions/_image/shinyprogramming_ss.png")
```

---
## Structure of a Shiny App

```{r, echo = FALSE, fig.align = 'center', out.width = "70%"}
knitr::include_graphics("https://raw.githubusercontent.com/therbootcamp/therbootcamp.github.io/master/_sessions/_image/uiandserver.png")
```

---
 <br>
 <br>
 <br>
 
 # Let's explore the user interface of an app!
 
 ### P.S. You'll create a very similar app in the practical!

---
## User Interface

```{r, echo = FALSE, fig.align = 'center', out.width = "80%"}
knitr::include_graphics("https://raw.githubusercontent.com/therbootcamp/therbootcamp.github.io/master/_sessions/_image/exampleapp_A.png")
```

---
## User Interface

```{r, echo = FALSE, fig.align = 'center', out.width = "80%"}
knitr::include_graphics("https://raw.githubusercontent.com/therbootcamp/therbootcamp.github.io/master/_sessions/_image/exampleapp_B.png")
```

---
## User Interface

```{r, echo = FALSE, fig.align = 'center', out.width = "80%"}
knitr::include_graphics("https://raw.githubusercontent.com/therbootcamp/therbootcamp.github.io/master/_sessions/_image/exampleapp_C.png")
```

---
## User Interface

```{r, echo = FALSE, fig.align = 'center', out.width = "80%"}
knitr::include_graphics("https://raw.githubusercontent.com/therbootcamp/therbootcamp.github.io/master/_sessions/_image/exampleapp_D.png")
```

---
## User Interface

```{r, echo = FALSE, fig.align = 'center', out.width = "80%"}
knitr::include_graphics("https://raw.githubusercontent.com/therbootcamp/therbootcamp.github.io/master/_sessions/_image/exampleapp_E.png")
```

---
## User Interface

```{r, echo = FALSE, fig.align = 'center', out.width = "80%"}
knitr::include_graphics("https://raw.githubusercontent.com/therbootcamp/therbootcamp.github.io/master/_sessions/_image/exampleapp_F.png")
```

---
## User Interface

```{r, echo = FALSE, fig.align = 'center', out.width = "80%"}
knitr::include_graphics("https://raw.githubusercontent.com/therbootcamp/therbootcamp.github.io/master/_sessions/_image/exampleapp_G.png")
```

---
## User Interface

```{r, echo = FALSE, fig.align = 'center', out.width = "80%"}
knitr::include_graphics("https://raw.githubusercontent.com/therbootcamp/therbootcamp.github.io/master/_sessions/_image/exampleapp_H.png")
```

---
## User Interface

```{r, echo = FALSE, fig.align = 'center', out.width = "80%"}
knitr::include_graphics("https://raw.githubusercontent.com/therbootcamp/therbootcamp.github.io/master/_sessions/_image/exampleapp_B.png")
```

---
## The final app!

<iframe src="https://econpsychbasel.shinyapps.io/histogram_app/" width="1200" height="700"></iframe>

---
## User Interface

The user interface typically contains two main components: Widgets, layouts, and plots

```{r, echo = FALSE, fig.align = 'center', out.width = "80%"}
knitr::include_graphics("https://raw.githubusercontent.com/therbootcamp/therbootcamp.github.io/master/_sessions/_image/userinterface_description.png")
```

---

## User Interface, Widgets

Widgets are simple fields added to the user interface for users to add inputs.

```{r, echo = FALSE, fig.align = 'center', out.width = "70%"}
knitr::include_graphics("https://raw.githubusercontent.com/therbootcamp/therbootcamp.github.io/master/_sessions/_image/widgetcode_output.png")
```

---

.pull-left4[
<br>
## Server
<br>

All code that creates plots, does machine learning ... (really anything!) goes in the <high>server()</high> function.

To present output like a plot, it must be <high>rendered</high> in the server using a special rendering function like `renderPlot()`

Once it is rendered, it is sent to the output and displayed in the user interface using an <high>output function</high> like `plotOutput()`.


]

.pull-right55[

<br>
```{r, echo = FALSE, fig.align = 'center', out.width = "100%"}
knitr::include_graphics("https://raw.githubusercontent.com/therbootcamp/therbootcamp.github.io/master/_sessions/_image/serverdescription.png")
```
]

---

## Server

.pull-left45[

<iframe src="https://econpsychbasel.shinyapps.io/barebones_hist/" width="800" height="800"></iframe>

]

.pull-right45[

```{r, eval = FALSE}
library(shiny)

# User Interface:
ui <- fluidPage(
  mainPanel(
    textInput("Title", "Title"),
    plotOutput("myplot")  # Create the plot output$displot
  )
)

server <- function(input, output) {

  # Define x
  x <- ChickWeight$weight

  # Send rendered plot to output
  output$myplot <- renderPlot({
    hist(x, main = input$Title)
  })
}

shinyApp(ui = ui, server = server)
```

]

---

## Cheatsheet

The Shiny cheatsheet explains the most common functions for rendering and presenting output.

```{r, echo = FALSE, fig.align = 'center', out.width = "60%"}
knitr::include_graphics("https://raw.githubusercontent.com/therbootcamp/therbootcamp.github.io/master/_sessions/_image/rendering_output.png")
```

---


.pull-left45[

## Publishing (hosting) an app


<br>

You can always run a Shiny app locally on your machine.

To get it online, you need to put it on a Shiny Server.

Publish an app (with some restrictions) at http://shinyapps.io from RStudio with one click!

Install a local server at your business (RStudio: $10,000 / year)

Other providers exist (e.g.; Amazon Web Services)

]

.pull-right45[
<br><br>
```{r, echo = FALSE, fig.align = 'center', out.width = "100%", fig.cap = "<a href = http://shiny.rstudio.com>R Studio</a>"}
knitr::include_graphics("https://raw.githubusercontent.com/therbootcamp/therbootcamp.github.io/master/_sessions/_image/shinypublish.png")
```

]

---
## Practical

In the practical, we will create the following app from scratch, and publish it online!

<iframe src="https://econpsychbasel.shinyapps.io/FinalApp/" width="1200" height="7500"></iframe>

---

# Practical

<p>
  <font size=6>
    <a href="https://therbootcamp.github.io/BaselRBootcamp_2018July/_sessions/Shiny/Shiny_practical.html"><b>Link to practical<b></a>
  </font>
</p>

