---
title: "Objects and Functions"
author: "BaselRBootcamp July 2018<br/><a href='https://therbootcamp.github.io'>www.therbootcamp.com</a><br/><a href='https://twitter.com/therbootcamp'>@therbootcamp</a>"
output:
  html_document:
    css: practical.css
---

```{r setup, include = FALSE}
knitr::opts_chunk$set(comment = NA, 
                      fig.width = 6, 
                      fig.height = 6,
                      fig.align = 'center',
                      echo = FALSE, 
                      eval = FALSE, 
                      warning = FALSE)

options(digits = 3)

library(baselers)
library(tidyverse)
```


<figure>
<center>
  <img src="https://www.baslerfasnacht.info/fancybox/img_en/basel-fasnacht_big.jpg" alt="Trulli" style="width:90%">
  <figcaption>https://www.baslerfasnacht.info/basel-fasnacht/index.php</figcaption>
</figure>


## Overview

In this practical you'll learn how to work with basic R objects. By the end of this practical you will know how to:

1. Create vectors of different types using `c()`
2. Understand the three main vector classes numeric, character, and logical using `class()` 
3. Create dataframes (and tibbles!) using `data.frame()` and `tibble()`
4. Access vectors from dataframes using `$`
5. Calculate basic descriptive statistics using `mean()`, `median()`, `table()` (and more!)

## Datasets

*None!*

## Packages

|Package| Installation|
|:------|:------|
|`tidyverse`|`install.packages("tidyverse")`|

### Glossary

*Creating vectors*

| Function| Description|
|:------|:--------|
| `c("a", "b", "c")` |Create a character vector|
|    `c(1, 2, 3)`| Create a numeric vector|
|    `c(TRUE, FALSE, TRUE)`|    Create a logical vector|

*Vector functions*

| Function| Description|
|:------|:--------|
| `mean(x), median(x), sd(x), sum(x)` |Mean, median standard deviation, sum|
| `max(x), min(x)` |Maximim, minimum|
| `table(x)` |Table of frequency counts|
| `round(x, digits)` |Round a numeric vector x to `digits`|

*Creating dataframes from vectors*

| Function| Description|
|:------|:--------|
| `data.frame(a, b, c)` |Create a dataframe from vectors a, b, c|
| `tibble(a, b, c)` |Create a tibble from vectors a, b, c|

*Accessing vectors from dataframes*

| Function| Description|
|:------|:--------|
| `df$a` |Access vector `a` from a dataframe `df`|



### Examples

```{r, eval = FALSE, echo = TRUE, message = FALSE, warning = FALSE}
library(tidyverse)

# Create vectors of (fake) stock data

name <- c("apple", "microsoft", "dell", "google", "twitter")
yesterday <- c(100, 89, 65, 54, 89)
today <- c(102, 85, 72, 60, 95)

# Summary statistics

mean(today)
mean(yesterday)

# Show classes

class(name)
class(yesterday)

# Operations of vectors

change <- today - yesterday

change # Print result

# Create a logical vector from two numerics

increase <- today > yesterday

increase # Print result

# Create a tibble containing multiple vectors
stocks <- tibble(name, yesterday, today, change, increase)

# Get column names
names(stocks)

# Access columns by name

stocks$name
stocks$today

# Calculate descriptives on columns

mean(stocks$yesterday)
mean(stocks$today)
table(stocks$increase)
mean(stocks$increase)
```

# Tasks

### A - Getting setup

1. Open your R project. It should already have the folders `1_Data` and `2_Code`. Make sure that all of the data files listed above are contained in the folder

```{r}
# Done!
```

2. Open a new R script and save it as a new file called `objects_practical.R` in the `2_Code` folder. At the top of the script, using comments, write your name and the date. The, load the set of packages listed above with `library()`.

## B - Creating vectors

The table below shows a subset of the `baselers` data. In this practical, you will convert this table to R objects and then analyse them!

```{r, echo = FALSE, eval = TRUE}
data <- baselers[1:10, c("id", "sex", "age", "height", "weight")]

data %>% mutate_all(replace_na, " ") %>% knitr::kable(format = "markdown", caption = "Data from 10 baselers")
```

1. Create a numeric vector called `id` that shows the id values. When you finish, print the object to see it!

```{r, eval = FALSE, echo = TRUE}
# Create a vector XX

XX <- c(XX, XX, XX, XX)

# Print the object

XX
```

2. Using the `class()` function, check the class of your `id` vector. Is it numeric?

```{r, eval = FALSE, echo = TRUE}
# Show the class of an object XX

class(XX)
```

3. Using the `length()` function, find out the length of your `id` object. Does it have length 10? If not, make sure you defined it correctly!

```{r, eval = FALSE, echo = TRUE}
# Show the length of an object XX

length(XX)
```

4. Create a character vector called `sex` that shows the sex values. Make sure to use quotation marks "" when entering the data to tell R that the data are charcters! When you finish, print the object to see it!

```{r, eval = FALSE, echo = TRUE}
# Create a character vector XX

XX <- c("XX", "XX", "XX", "XX")
```

5. Using the `class()` function, check the class of your `sex` vector. Is it character?

6. Using the `length()` function, find out the length of your `sex` object. Does it have length 10? If not, make sure you defined it correctly!

7. Using the same steps as before, create the `height` vector.

8. Look at the weight data, you'll notice it contains an missing value. Create a vector called `weight` containing these data, making sure to specify the missing value as `NA`

## C - Functions

1. Using the `table()` function, find out how many males and females are in the data. You should find `r sum(data$sex == "male")` males and `r sum(data$sex == "female")` females!

2. Using the `mean()` function, calculate the mean age. It should be `r mean(data$age)`!

3. Try calculating the mean value of sex. What happens? Why?

4. Try calculating the mean weight. You should get an `NA` value. Why?

5. Look at the help menu for the `mean()` function to look for an argument that will help you with your problem.

6. Using the correct argument for the mean function, calculate the mean weight ignoring NA values. It should be `r round(mean(data$weight, na.rm = TRUE), 2)`!

## D - Logical Vectors

1. Logical vectors contain only `TRUE` and `FALSE` values. Create a new vector called `tall_180` which indicates which baselers are taller than 180cm. To do this, use the `>` operator.  

```{r, echo = TRUE, eval = FALSE}
# Create a logical vector tall_180 indicating
#  which baselers are taller than 180cm

XX <- XX > XX
```

2. Print your `tall_180` vector to the console. Do you see only TRUE and FALSE values? If so, do the values that are TRUE match the ten baselers that are actually over 180cm?

3. Using the `table()` function, create a table showing how many of the ten baselers are taller than 180cm and how many are not

4. Using the `mean()` function, calculate the percentage of the ten baselers that are taller than 180cm.

## E - Creating dataframes

1. Using the `data.frame()` function, create a dataframe called `ten_df` that contains each of vectors you just created: `id`, `sex`, `height`, `weight`, `tall_180`

```{r, eval = FALSE, echo = TRUE}
XX <- data.frame(XX, XX, XX, XX, XX) 
```

2. Print your `ten_df` object to see how it looks! Does it contain all of the vectors?

3. Using the `dim()` function, print the number of rows and columns in your dataframe. Do you get 10 rows and 5 columns?

4. What is the class of your `ten_df` object? Use the `class()` function to find out!

5. Use the `summary()` function to print descriptive statistics from each column of `ten_df`

6. Using the `$` operator, print the `age` column from the `ten_df` dataframe.

7. Calculate the maximum `age` value from the `ten_df` dataframe. Do you get the same result from when you calculated it from the original vector `age`?

8. Instead of creating a dataframe of the data using the `data.frame()` function, try creating a tibble called `ten_tibble` using the `tibble()` function. You can use the exact same arguments you used before.

9. Print your new `ten_tibble` object, how does it look different from `ten_df`? Try calculating the maximum `age` from this object. Is it different from what you got before?

## X - Challenges

1. If you take the `sum()` of a logical vector, R will return the number of cases that are `TRUE`. Using this, find out how many of the ten baselers are male.

2. You can use logical vectors to select rows from a dataframe based on certain criteria. using the following template, get the id values of baselers who are younger than 30:

```{r, echo = TRUE, eval = FALSE}
# Create a logical vector indicating which baselers are younger than 30
young_30 <- XX$XX < 30

# Print the ids of baselers younger than 30
XX$id[young_30]
```

3. Use a combination of logical vectors and the `mean()` function to answer the question: "What is the mean age of baselers who are heavier than 80kg?"

4. What are the id values of baselers who are male *and* are shorter than 165cm? (Hint: You will need to use `&` to combine multiple logical vectors)
